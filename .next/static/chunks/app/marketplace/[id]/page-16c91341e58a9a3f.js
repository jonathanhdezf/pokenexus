(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{25619:function(e,t,s){Promise.resolve().then(s.bind(s,17405)),Promise.resolve().then(s.bind(s,93085)),Promise.resolve().then(s.t.bind(s,231,23))},17405:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(57437),r=s(86856),i=s(60690),l=s(54142),n=s(2842),c=s(9542),o=s(57896),d=s(18511);function x(e){let{data:t}=e,s=t&&t.length>0?t.map(e=>({...e,price:Number(e.price)})):[{date:"Old",price:90},{date:"Now",price:100}];return(0,a.jsxs)("div",{className:"h-[300px] w-full bg-surface/50 border border-white/5 rounded-xl p-4",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm mb-4",children:"Price History (USD)"}),(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(i.w,{data:s,children:[(0,a.jsx)(l.q,{strokeDasharray:"3 3",stroke:"#333",vertical:!1}),(0,a.jsx)(n.K,{dataKey:"date",stroke:"#666",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(c.B,{stroke:"#666",fontSize:12,tickFormatter:e=>"$".concat(e),tickLine:!1,axisLine:!1}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333"},itemStyle:{color:"#fff"},formatter:e=>["$".concat(e),"Price"]}),(0,a.jsx)(d.x1,{type:"monotone",dataKey:"price",stroke:"#00c6ff",strokeWidth:2,dot:{r:4,fill:"#0a0a0a",stroke:"#00c6ff",strokeWidth:2},activeDot:{r:6,fill:"#00c6ff"}})]})})]})}},93085:function(e,t,s){"use strict";s.d(t,{default:function(){return u}});var a=s(57437),r=s(30998),i=s(2265),l=s(95737),n=s(34446),c=s(25817),o=s(74697),d=s(36141),x=s(13231),m=s(16463);function h(e){var t;let{card:s,isOpen:h,onClose:u}=e,p=(0,m.useRouter)(),{data:f,update:b}=(0,r.useSession)(),[g,j]=(0,i.useState)("confirm"),[y,w]=(0,i.useState)(""),N=Number((null==f?void 0:null===(t=f.user)||void 0===t?void 0:t.walletBalance)||0),v="string"==typeof s.price?Number(s.price.replace(/[$,]/g,"")):s.price,k=async()=>{if(N<v){w("Insufficient funds in your wallet.");return}j("processing"),w("");try{let e=await fetch("/api/purchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardId:s.id})}),t=await e.json();if(!e.ok)throw Error(t.message||"Purchase failed");await b({...f,user:{...null==f?void 0:f.user,walletBalance:t.newBalance}}),j("success")}catch(e){w(e.message||"Something went wrong."),j("confirm")}};return(0,a.jsx)(n.M,{children:h&&(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,a.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),(0,a.jsxs)(c.E.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-lg bg-surface border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:[(0,a.jsx)("button",{onClick:u,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors z-10",children:(0,a.jsx)(o.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"p-8",children:["confirm"===g&&(0,a.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Confirm Purchase"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Review your order details below."})]})]}),(0,a.jsxs)("div",{className:"bg-black/40 rounded-2xl p-4 border border-white/5 mb-6 flex gap-4",children:[(0,a.jsx)("div",{className:"w-20 h-28 relative rounded-lg overflow-hidden bg-gray-900 border border-white/5 shadow-inner",children:(0,a.jsx)("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-contain p-2"})}),(0,a.jsxs)("div",{className:"flex-1 py-2",children:[(0,a.jsx)("div",{className:"text-xs text-primary font-bold uppercase tracking-wider mb-1",children:s.set}),(0,a.jsx)("h3",{className:"text-lg font-bold truncate mb-2",children:s.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-green-500"})," Inspected & Authenticated"]})]})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Card Price"}),(0,a.jsxs)("span",{className:"font-mono text-white font-bold",children:["$",v.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Processing Fee"}),(0,a.jsx)("span",{className:"font-mono text-green-400 font-bold",children:"$0.00"})]}),(0,a.jsx)("div",{className:"h-px bg-white/10 my-1"}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-lg",children:[(0,a.jsx)("span",{className:"font-bold",children:"Total"}),(0,a.jsxs)("span",{className:"font-mono text-cyan-400 font-bold tracking-tighter text-2xl",children:["$",v.toLocaleString()]})]})]}),y&&(0,a.jsxs)("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-500 text-sm mb-6 flex gap-3",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5 shrink-0"}),y]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("button",{onClick:k,className:"w-full py-4 bg-white text-black font-bold rounded-2xl hover:bg-gray-200 transition-all transform active:scale-[0.98] shadow-lg shadow-white/5",children:"Confirm Transaction"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Your balance: "}),(0,a.jsxs)("span",{className:"text-xs font-mono font-bold text-gray-300",children:["$",N.toLocaleString()]})]})]})]}),"processing"===g&&(0,a.jsxs)("div",{className:"py-12 flex flex-col items-center justify-center text-center overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative w-64 h-64 flex items-center justify-center",children:[(0,a.jsx)(c.E.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.5,0],opacity:[0,.7,0]},transition:{duration:1,repeat:1/0,repeatDelay:1},className:"absolute w-20 h-40 bg-red-500 blur-3xl z-10 origin-bottom",style:{bottom:"45%"}}),(0,a.jsxs)(c.E.div,{initial:{scale:1,opacity:1,y:-40,rotate:0},animate:{scale:[1,.3,0],y:[-40,-10,40],rotate:[0,45,180],opacity:[1,1,0]},transition:{duration:1,repeat:1/0,repeatDelay:1},className:"absolute w-28 h-40 z-0 overflow-hidden rounded-lg border border-white/20 shadow-2xl",children:[(0,a.jsx)("img",{src:s.imageUrl,className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-red-500/30 mix-blend-overlay"})]}),(0,a.jsxs)(c.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:10},className:"relative z-20",children:[(0,a.jsx)(c.E.img,{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",className:"w-24 h-24 drop-shadow-[0_0_20px_rgba(255,255,255,0.3)]",animate:{rotate:[0,-15,15,-15,15,0],x:[0,-4,4,-4,4,0]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5,times:[0,.2,.4,.6,.8,1]}}),(0,a.jsx)(c.E.div,{animate:{backgroundColor:["rgb(255,255,255)","rgb(255,0,0)","rgb(255,255,255)"]},transition:{duration:1.5,repeat:1/0,repeatDelay:.5},className:"absolute top-[48%] left-[48%] w-2 h-2 rounded-full -translate-x-1/2 -translate-y-1/2 z-30"})]})]}),(0,a.jsx)("h2",{className:"text-2xl font-black font-display mb-2 mt-4 tracking-tight uppercase",children:"\xa1Capturando Carta!"}),(0,a.jsx)("p",{className:"text-gray-400 max-w-xs text-sm",children:"Validando transacci\xf3n en la Pok\xe9Nexus Chain..."})]}),"success"===g&&(0,a.jsxs)("div",{className:"animate-in zoom-in duration-500 flex flex-col items-center justify-center text-center py-8 relative",children:[(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsxs)(c.E.div,{initial:{scale:0},animate:{scale:[0,1.2,1],rotate:[0,360]},transition:{duration:.5},className:"w-32 h-32 rounded-full bg-green-500/10 flex items-center justify-center relative border border-green-500/20",children:[(0,a.jsx)("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",className:"w-20 h-20 opacity-40 absolute blur-[2px]"}),(0,a.jsx)(x.Z,{className:"w-16 h-16 text-green-500 relative z-10"})]}),[...Array(8)].map((e,t)=>(0,a.jsx)(c.E.div,{initial:{scale:0,x:0,y:0},animate:{scale:[0,1,.5,0],x:[0,100*Math.cos(45*t*Math.PI/180)],y:[0,100*Math.sin(45*t*Math.PI/180)],rotate:[0,180]},transition:{duration:1.5,repeat:1/0,delay:.1*t},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-xl pointer-events-none",children:"âœ¨"},t))]}),(0,a.jsx)("h2",{className:"text-3xl font-black font-display mb-3 tracking-tighter text-holographic animate-shimmer uppercase",children:"\xa1CARTA CAPTURADA!"}),(0,a.jsxs)("p",{className:"text-gray-400 mb-8 max-w-xs text-sm leading-relaxed",children:["\xa1Excelente lanzamiento! ",(0,a.jsx)("span",{className:"text-white font-bold",children:s.name})," ahora forma parte de tu colecci\xf3n."]}),(0,a.jsxs)("div",{className:"w-full space-y-3 relative z-10",children:[(0,a.jsxs)("button",{onClick:()=>{u(),p.push("/dashboard"),p.refresh()},className:"group w-full py-4 bg-primary text-nexus font-black uppercase tracking-widest text-sm rounded-2xl hover:bg-cyan-400 transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-3",children:[(0,a.jsx)("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png",className:"w-5 h-5 group-hover:rotate-180 transition-transform duration-500"}),"Ir a mi Colecci\xf3n"]}),(0,a.jsx)("button",{onClick:u,className:"w-full py-4 bg-white/5 border border-white/10 text-white font-black uppercase tracking-widest text-sm rounded-2xl hover:bg-white/10 transition-all",children:"Seguir Comprando"})]})]})]})]})]})})}function u(e){let{cardId:t,name:s,price:n,imageUrl:c,set:o}=e,{status:d}=(0,r.useSession)(),[x,m]=(0,i.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("button",{onClick:()=>{if("authenticated"!==d){alert("Please login to purchase items.");return}m(!0)},className:"w-full flex items-center justify-center gap-2 bg-white text-black font-bold py-4 px-8 rounded-lg hover:bg-gray-200 transition-all transform active:scale-[0.98] shadow-lg shadow-white/10",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5"})," Buy Now for ",n]})}),(0,a.jsx)(h,{isOpen:x,onClose:()=>m(!1),card:{id:t,name:s,price:n,imageUrl:c,set:o}})]})}}},function(e){e.O(0,[231,508,849,521,971,23,744],function(){return e(e.s=25619)}),_N_E=e.O()}]);